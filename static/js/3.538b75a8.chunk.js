(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{113:function(e,t,s){e.exports={person:"Profile_person__odvzQ",pictureContainer:"Profile_pictureContainer__2EFQW",uploadNewPhoto:"Profile_uploadNewPhoto__1yG8Z",uploadPhotoIcon:"Profile_uploadPhotoIcon__3HO3_",image:"Profile_image__1qUqP",statusInput:"Profile_statusInput__2KX1_",hoverable:"Profile_hoverable__2Flhg",picture:"Profile_picture__2cI9A",hidden:"Profile_hidden__1JOAK",personInfo:"Profile_personInfo__1TiuD",contact:"Profile_contact__1MXff",contactLink:"Profile_contactLink__1mlXl",error:"Profile_error__DjZp1",description:"Profile_description__GZf0y",editProfile:"Profile_editProfile__2Tv-X",disabled:"Profile_disabled__Pp1tn",personInfoShow:"Profile_personInfoShow__Cf34R",personInfoFooter:"Profile_personInfoFooter__F41Yf"}},114:function(e,t,s){e.exports={item:"Post_item__1qE9m",image:"Post_image__3PFhZ",text:"Post_text__3A8l0",likes:"Post_likes__3wAsE"}},115:function(e,t,s){e.exports={form:"MyPosts_form__o8j_Z",title:"MyPosts_title__3nOHt"}},117:function(e,t,s){"use strict";s.r(t);var n=s(3),a=s(1),c=s(5),r=s.n(c),i=s(8),o=s(19),l=s(2),u=s(54),j=s(16),b=s(30),p=s(10),d=s(31),f=s(113),h=s.n(f),O=s(38),m=s(17),x=s(11),_=s.n(x),g=function(e){var t=e.initialValues,s=e.profile,n=e.updateProfile,c=e.setEditMode,o=function(){var e=Object(i.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:if(!(s=e.sent)){e.next=5;break}return e.abrupt("return",s);case 5:c(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(O.b,{onSubmit:o,initialValues:t,children:function(e){var t=e.handleSubmit,n=e.submitError,c=e.submitting;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("p",{children:Object(a.jsx)("b",{className:h.a.description,children:"Full name: "})}),Object(m.b)("full name..",null,"fullName","input",[]),Object(a.jsx)("p",{children:Object(a.jsx)("b",{className:h.a.description,children:"About me: "})}),Object(m.b)("About me..",null,"aboutMe","textarea",[]),Object(a.jsx)("p",{children:Object(a.jsx)("b",{className:h.a.description,children:"Looking for a job: "})}),Object(m.b)(null,null,"lookingForAJob","input",[],{type:"checkbox"}),Object(a.jsx)("p",{children:Object(a.jsx)("b",{className:h.a.description,children:"My professional skills: "})}),Object(m.b)("description..",null,"lookingForAJobDescription","textarea",[]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{className:h.a.description,children:"Contacts: "}),Object.keys(s.contacts).map((function(e){return Object(a.jsxs)("div",{className:h.a.contact,children:[Object(a.jsx)("p",{children:Object(a.jsxs)("b",{className:h.a.description,children:[e,": "]})})," ",Object(m.b)(e,null,"contacts."+e,"input",[])]},e)}))]}),Object(a.jsx)(m.a,{className:_()(Object(p.a)({},h.a.disabled,c)),disabled:c,text:c?"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435...":"Save edited information"}),n&&Object(a.jsx)("p",{className:h.a.error,children:n})]})}})},P=function(e){var t=Object(l.useState)(!1),s=Object(d.a)(t,2),n=s[0],c=s[1],r=Object(l.useState)(e.status),i=Object(d.a)(r,2),o=i[0],u=i[1];Object(l.useEffect)((function(){u(e.status)}),[e.status]);return e.isStatusFetching?Object(a.jsx)(b.a,{insteadOf:"status"}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Status:"})," "]}),n?Object(a.jsx)("input",{autoFocus:!0,onChange:function(e){u(e.target.value)},onBlur:function(){c(!1),e.updateStatus(o)},className:h.a.statusInput,value:o,type:"text"}):Object(a.jsx)("span",{onDoubleClick:e.isOwner?function(){c(!0)}:null,children:e.status||"no status at the time"})]})},v=s(25),N=function(e){var t=e.profile,s=e.setEditMode,n=e.isOwner,c=Object(l.useState)(0),r=Object(d.a)(c,2),i=r[0],o=r[1],u=Object(l.useRef)(null);Object(l.useEffect)((function(){o(u.current.clientHeight),u.current.style.height=u.current.clientHeight+"px"}),[]);return Object(a.jsxs)("div",{className:h.a.personInfo,children:[Object(a.jsx)("header",{children:Object(a.jsx)("button",{onClick:function(e){var t=u.current;"0"!==t.style.height.split("px")[0]?t.style.height=0:t.style.height=i+"px"},className:_()(h.a.personInfoShow),type:"button",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})}),Object(a.jsxs)("footer",{className:_()(h.a.personInfoFooter),ref:u,children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{className:h.a.description,children:"Full name: "}),t.fullName]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{className:h.a.description,children:"About me: "}),t.aboutMe]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{className:h.a.description,children:"Looking for a job: "}),t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{className:h.a.description,children:"My professional skills: "}),t.lookingForAJobDescription]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Contacts: "}),Object.keys(t.contacts).map((function(e){return Object(a.jsx)(S,{contactTitle:e,contactValue:t.contacts[e]},e)}))]}),n&&Object(a.jsx)(m.a,{text:"Edit Profile",onClick:s})]})]})},S=function(e){var t=e.contactTitle,s=e.contactValue;return Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{className:h.a.contact+" "+h.a.description,children:t}),": ",Object(a.jsx)("a",{className:h.a.contactLink,href:s,target:"__blank",children:s})]})},k=function(e){var t=e.profile,s=e.status,n=e.updateStatus,c=e.isOwner,o=e.savePhoto,u=e.updateProfile,j=e.isStatusFetching,f=Object(l.useState)(!1),O=Object(d.a)(f,2),m=O[0],x=O[1],S=Object(l.useState)(!1),k=Object(d.a)(S,2),w=k[0],y=k[1],F=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,o(t.target.files[0]);case 3:x(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:h.a.picture,alt:"my avatar",src:t.photos.large?t.photos.large:"https://pbs.twimg.com/profile_images/1285655593592791040/HtwPZgej.jpg"}),c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"file",className:h.a.hidden,onChange:F,id:"input-file"}),Object(a.jsx)("label",{htmlFor:"input-file",className:h.a.uploadNewPhoto,children:Object(a.jsx)(v.b,{className:h.a.uploadPhotoIcon})})]})]});return Object(a.jsxs)("div",{className:h.a.person,children:[Object(a.jsx)("div",{className:_()(h.a.pictureContainer,Object(p.a)({},h.a.hoverable,c)),children:m?Object(a.jsx)(b.a,{}):I}),Object(a.jsx)(P,{status:s,isStatusFetching:j,updateStatus:n,isOwner:c}),w?Object(a.jsx)(g,{updateProfile:u,setEditMode:y,initialValues:t,profile:t}):Object(a.jsx)(N,{profile:t,setEditMode:y,isOwner:c})]})},w=function(e){return e.profilePage.profile},y=function(e){return e.profilePage.status},F=function(e){return e.profilePage.posts},I=function(e){return e.profilePage.isStatusFetching},A=s(23),E=s(114),C=s.n(E),M=s(37),J=function(e){var t;return Object(a.jsxs)("div",{className:C.a.item,children:[Object(a.jsx)("img",{className:C.a.image,src:(null===(t=e.profile)||void 0===t?void 0:t.photos.large)||M.a,alt:"my avatar"}),Object(a.jsxs)("div",{className:C.a.text,children:[Object(a.jsx)("p",{children:e.message}),Object(a.jsxs)("p",{className:C.a.likes,children:["Likes: ",e.likes]})]})]})},L=s(115),T=s.n(L),Z=s(27),D=Object(Z.b)(10),H=Object(m.c)("textarea"),V=function(e){var t=function(){var e=Object(i.a)(r.a.mark((function e(t,s,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t),n.restart();case 2:case"end":return e.stop()}}),e)})));return function(t,s,n){return e.apply(this,arguments)}}();return Object(a.jsx)(O.b,{onSubmit:function(t){e.onSubmit(t.postText)},children:function(e){var s=e.handleSubmit,n=e.form;return Object(a.jsxs)("form",{className:T.a.form,onSubmit:function(e){return t(e,s,n)},children:[Object(a.jsx)(O.a,{component:H,name:"postText",className:"comment",validate:Object(Z.a)(Z.c,D),placeholder:"your news....."}),Object(a.jsx)(m.a,{text:"Apply"})]})}})},X=function(e){var t=e.posts,s=e.profile,n=e.isOwner,c=e.addPost,r=Object(A.a)(t).reverse().map((function(e){return Object(a.jsx)(J,{profile:s,message:e.message,likes:e.likes},e.id)}));return n?Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{className:T.a.title,children:"Add a new post"}),Object(a.jsx)(V,{onSubmit:c}),r,";"]}):null},q=Object(j.b)((function(e){return{posts:F(e),profile:w(e)}}),{addPost:u.a})(X),z=s.p+"static/media/cover-img.20514fb5.jpg",G=function(e){return e.profile?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:h.a.image,children:Object(a.jsx)("img",{src:z,alt:""})}),Object(a.jsx)(k,{updateProfile:e.updateProfile,profile:e.profile,isOwner:e.isOwner,savePhoto:e.savePhoto,status:e.status,updateStatus:e.updateStatus,isStatusFetching:e.isStatusFetching}),Object(a.jsx)(q,{isOwner:e.isOwner})]}):Object(a.jsx)(b.a,{})},K=s(6),Q=s(13);t.default=Object(o.d)(Object(j.b)((function(e){return{profile:w(e),myId:Object(Q.e)(e),status:y(e),isAuthorized:Object(Q.c)(e),isStatusFetching:I(e)}}),{getProfile:u.c,getStatus:u.d,updateStatus:u.h,savePhoto:u.e,updateProfile:u.g,setStatusFetching:u.f}),K.g)((function(e){var t=e.match.params.userId;return Object(l.useEffect)((function(){(function(){var s=Object(i.a)(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t){s.next=11;break}if(t=e.myId){s.next=5;break}return e.history.push("/login"),s.abrupt("return");case 5:return e.getProfile(t),e.setStatusFetching(!0),s.next=9,e.getStatus(t);case 9:return e.setStatusFetching(!1),s.abrupt("return");case 11:e.getStatus(t),e.getProfile(t);case 13:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}})()()}),[t]),Object(a.jsx)(G,Object(n.a)(Object(n.a)({},e),{},{isOwner:!e.match.params.userId}))}))}}]);
//# sourceMappingURL=3.538b75a8.chunk.js.map